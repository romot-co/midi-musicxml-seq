{"version":3,"sources":["../public/dictionaries lazy /^/.//.*//main$/ groupOptions: {} namespace object","components/SequenceKeys.js","components/Note.js","components/Sequence.js","components/LyricEdit.js","modals/HelpModal.js","utils/convert.js","pages/MidiEditPage.js","utils/musicxml.js","utils/ust.js","App.js","serviceWorker.js","index.js"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","t","keys","Object","module","exports","SequenceKeys","props","octave","mapPitch","0","1","2","3","4","5","6","7","8","9","10","11","className","v","i","Fragment","key","midi","color","pitch","UncontrolledTooltip","target","placement","Note","note","xScale","yScale","transpose","phoneme","lyric","index","edit","setEdit","locale","onChange","inputEl","useRef","useState","value","setValue","styles","left","ticks","bottom","width","durationTicks","useEffect","current","select","isEdit","onClick","stopPropagation","style","type","onKeyPress","toLowerCase","length","hasSmallLetter","isRomaji","maxLength","ref","delay","show","name","Sequence","trackIndex","setLyric","pitches","Array","reduce","a","c","slice","oc","n","indexOf","reverse","data","toJSON","header","beats","timeSignatures","timeSignature","notes","tracks","totalTicks","measureTicks","ppq","measuresCount","Math","ceil","maxTicks","setPhoneme","text","nextLyric","p","x","_","LyricEdit","expand","setExpand","limit","disabled","handleChangeLyric","str","trimed","replace","trim","split","forEach","origin","next","isOnlyHiragana","push","toKana","toRomaji","join","Input","placeholder","onBlur","onCompositionEnd","HelpModal","handleClose","Modal","isOpen","size","ModalHeader","ModalBody","Row","Col","lg","link","href","rel","ModalFooter","Button","midiNumberToPitchMusicXML","midiNumber","mapStep","mapAlter","floor","step","alter","_text","toString","MidiEditPage","loaded","setLoaded","window","navigator","language","setLocale","fileInputRef","uploadRef","setMidi","setTrackIndex","tempo","setTempo","setTranspose","expandLyric","setExpandLyric","setYScale","setXScale","tab","setTab","start","setStart","openTooltipUpload","setOpenTooltipUpload","showHelp","setShowHelp","updateLocale","lang","lisan","setLocaleName","dict","add","document","querySelector","scrollIntoView","Helmet","Navbar","light","click","Tooltip","fade","accept","file","files","reader","FileReader","readAsArrayBuffer","onload","midiData","result","alert","Midi","tempos","bpm","findIndex","focus","onerror","min","max","UncontrolledDropdown","DropdownToggle","DropdownMenu","DropdownItem","xml","raw","isArray","track","measures","measureIndex","measureNotes","filter","rest","duration","before","currentLast","beforeLast","_attributes","dynamics","velocity","tie","number","unshift","attributes","divisions","fifths","time","clef","sign","line","direction","sound","json","_declaration","version","encoding","_doctype","part","measure","xmljs","json2xml","compact","spaces","parseMidiToMusicXML","blob","Blob","createElement","download","URL","createObjectURL","ustOptions","projectName","flags","outFile","voiceDir","mode2","Number","parseMidiToUST","divider","Container","fluid","marginTop","Nav","pills","NavItem","NavLink","active","TabContent","activeTab","TabPane","tabId","Routes","basename","process","exact","path","component","App","Boolean","location","hostname","match","ReactDOM","render","getElementById","serviceWorker","ready","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.10b93632.chunk.js","sourcesContent":["var map = {\n\t\"./en/main\": [\n\t\t166,\n\t\t3\n\t],\n\t\"./ja/main\": [\n\t\t167,\n\t\t4\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 7);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 161;\nmodule.exports = webpackAsyncContext;","import React from 'react';\nimport { UncontrolledTooltip } from 'reactstrap';\n\nconst SequenceKeys = props => {\n  const { keys, octave } = props;\n  const mapPitch = {\n    0: 'C',\n    1: 'C#',\n    2: 'D',\n    3: 'D#',\n    4: 'E',\n    5: 'F',\n    6: 'F#',\n    7: 'G',\n    8: 'G#',\n    9: 'A',\n    10: 'A#',\n    11: 'B',\n  };\n\n  return (\n    <div className=\"sequence-keys\">\n      { keys.map((v,i) => (\n        <React.Fragment key={i}>\n          <div className={`sequence-key sequence-key-${v.midi} sequence-key-${v.color} sequence-key-${v.pitch}`} id={`sequence-key-${v.midi}`}>\n            <span className=\"sequence-key-base\">{mapPitch[v.pitch]}{octave + 1}</span>\n          </div>\n          <UncontrolledTooltip\n            target={`sequence-key-${v.midi}`} placement=\"right\"\n          >\n            {mapPitch[v.pitch]}{octave}\n          </UncontrolledTooltip>\n        </React.Fragment>\n      ))}\n    </div>\n  );\n};\n\nexport default SequenceKeys;\n","import React, { useState, useEffect, useRef } from 'react';\nimport hasSmallLetter from 'jaco/fn/hasSmallLetter';\nimport { isRomaji } from 'wanakana';\nimport { UncontrolledTooltip } from 'reactstrap';\n\nconst Note = props => {\n  const { note, xScale, yScale, transpose, phoneme, lyric, index, edit, setEdit, locale, onChange } = props;\n  const inputEl = useRef(null);\n  const [value, setValue] = useState('');\n  const styles = {\n    left: `${note.ticks * xScale}px`,\n    bottom: `${(note.midi - 12) * yScale + (transpose * yScale)}px`,\n    width: `${note.durationTicks * xScale}px`,\n  };\n  const handleClick = (e) => {\n    e.stopPropagation();\n    if (!edit) {\n      setEdit(index);\n      inputEl && inputEl.current.select();\n    }\n  };\n  const handleKeyPress = (e) => {\n    const key = e.key.toLowerCase();\n    if (key === 'enter' || (key === 'tab' && lyric.length < index)) {\n      setEdit(index + 1);\n    }\n  };\n\n  const handleChange = (e) => {\n    setValue(e.target.value);\n    if (locale === 'ja') {\n      if (!e.target.value) {\n        onChange(' ', index);\n      } else if (e.target.value.length === 1) {\n        onChange(e.target.value[0], index);\n      } else if (hasSmallLetter(e.target.value)) {\n        onChange(e.target.value, index);\n      };\n    }\n    if (locale === 'en') {\n      if (!e.target.value) {\n        onChange(' ', index);\n      } else if (e.target.value.length === 1) {\n        onChange(e.target.value[0], index);\n      } else if (isRomaji(e.target.value)) {\n        onChange(e.target.value, index);\n      };\n    }\n  };\n\n  useEffect(() => {\n    setValue(phoneme);\n  }, [phoneme]);\n\n  useEffect(() => {\n    if (edit === index) {\n      inputEl.current.select();\n    }\n  }, [edit]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const isEdit = edit === index;\n\n  return (\n    <div className=\"note\" onClick={handleClick} style={styles}>\n      <input\n        type=\"text\"\n        value={value || ''}\n        onKeyPress={handleKeyPress}\n        onChange={handleChange}\n        className=\"note-input\"\n        maxLength={locale === 'ja' ? 2 : 3}\n        ref={inputEl}\n        id={`note-${index}`}\n      />\n      {!isEdit &&\n        <UncontrolledTooltip\n          target={`note-${index}`}\n          placement=\"bottom\"\n          delay={{\n            show: 200,\n          }}\n        >{value}{' '}<span className=\"text-muted\">{note.name}</span></UncontrolledTooltip>\n      }\n    </div>\n  );\n};\n\nexport default Note;\n","import React, { useState } from 'react';\nimport SequenceKeys from 'components/SequenceKeys';\nimport Note from 'components/Note';\n\nconst Sequence = props => {\n  const { midi, trackIndex = 0, transpose = 0, lyric, setLyric, xScale, yScale, locale } = props;\n  const pitches = [...Array(128).keys()]\n    .reduce((a, c, i) => i % 12 === 0 ? [...a, [c]] : [...a.slice(0, -1), [...a[a.length - 1], c]], [])\n    .map((v,oc) => v.map((n,i) => {\n      return {\n        midi: n,\n        pitch: i,\n        octave: 9 - oc,\n        color: [0,2,4,5,7,9,11].indexOf(i) > -1 ? 'white' : 'black',\n      }\n    }).reverse()).reverse();\n  const data = midi && midi.toJSON();\n  const header = data.header;\n  const beats = (data && header.timeSignatures && header.timeSignatures.length > 0) ? header.timeSignatures[0].timeSignature : [4,4];\n  const notes = data && data.tracks[trackIndex].notes;\n  const totalTicks = notes ? (notes.slice(-1)[0].ticks + notes.slice(-1)[0].durationTicks) : 7680;\n  const ppq = data ? header.ppq : 480;\n  const measureTicks = ppq * beats[1] * (beats[0] / beats[1]);\n  const measuresCount = Math.ceil(totalTicks / measureTicks);\n  const maxTicks = measureTicks * measuresCount;\n  const setPhoneme = (text, index) => {\n    const nextLyric = lyric.map((v,i) => i === index ? text : v);\n    setLyric(nextLyric);\n  };\n  const [edit, setEdit] = useState(false);\n  return (\n    <div className=\"sequence\">\n      <div className=\"sequence-scales\">\n        {\n          pitches.map((v,i,o) => (\n            <SequenceKeys keys={v} octave={9 - i} key={i} />\n          ))\n        }\n      </div>\n      <div className=\"sequence-body\">\n        <div className=\"sequence-grid-y\" style={{width: `${maxTicks * xScale}px`}} onClick={() => setEdit(false)}>\n          { pitches.map((v,i,o) => (\n            <div className=\"sequence-grid-octave\" key={i}>\n              { v.map((p,x) => (\n                <div key={x} className={`sequence-grid-pitch sequence-grid-pitch-${p.color}`} />\n              ))}\n            </div>\n          ))}\n        </div>\n        <div className=\"sequence-grid-x\">\n          { [...Array(measuresCount).keys()].map((_,i) => (\n            <div className=\"sequence-grid-measure\" key={i} style={{left: `${measureTicks * xScale * (i + 1)}px`}} />\n          )) }\n        </div>\n        { midi && data.tracks[trackIndex].notes.map((v,i) => (\n          <Note\n            note={v}\n            xScale={xScale}\n            yScale={yScale}\n            transpose={transpose}\n            key={i}\n            phoneme={lyric[i]}\n            edit={edit}\n            setEdit={setEdit}\n            index={i}\n            lyric={lyric}\n            locale={locale}\n            onChange={setPhoneme}\n          />\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default Sequence;\n","import React, { useState, useEffect } from 'react';\nimport { Input } from 'reactstrap';\nimport hasSmallLetter from 'jaco/fn/hasSmallLetter';\nimport isOnlyHiragana from 'jaco/fn/isOnlyHiragana';\nimport { toKana, toRomaji } from 'wanakana';\nimport { t } from \"lisan\";\n\nconst LyricEdit = props => {\n  const { lyric, setLyric, expand, setExpand, limit, locale, disabled } = props;\n  const [value, setValue] = useState('');\n  const handleChangeLyric = (str) => {\n    const trimed = str.replace(/\\s/g, '').trim();\n    let nextLyric = [];\n    if (locale === 'ja') {\n      trimed.split('').forEach((current,i,origin) => {\n        const next = origin[i+1] || false;\n        if (!isOnlyHiragana(current)) { return; }\n        if (hasSmallLetter(current)) { return; }\n        if (next && hasSmallLetter(next)) {\n          nextLyric.push(current + next);\n        } else {\n          nextLyric.push(current);\n        }\n      });\n    }\n    if (locale === 'en') {\n      toKana(trimed).split('').forEach((current,i,origin) => {\n        const next = origin[i+1] || false;\n        if (!isOnlyHiragana(current)) { return; }\n        if (hasSmallLetter(current)) { return; }\n        if (next && hasSmallLetter(next)) {\n          nextLyric.push(toRomaji(current + next));\n        } else {\n          nextLyric.push(toRomaji(current));\n        }\n      });\n    }\n    setLyric(nextLyric.slice(0,limit));\n  };\n\n  const handleChange = (e) => {\n    setValue(e.target.value);\n  };\n\n  const handleCompositionEnd = (e) => {\n    handleChangeLyric(e.target.value);\n  };\n\n  const handleBlur = (e) => {\n    handleChangeLyric(e.target.value);\n  };\n\n  useEffect(() => {\n    setValue(lyric.join(''));\n  }, [lyric]);\n\n  return (\n    <Input\n      type=\"textarea\"\n      className={`lyric-text mr-3 ${expand ? 'lyric-text-expand' : ''}`}\n      value={value}\n      placeholder={t('inputLyrics')}\n      onClick={() => setExpand(true)}\n      onChange={handleChange}\n      onBlur={handleBlur}\n      onCompositionEnd={handleCompositionEnd}\n      id=\"lyricEditInput\"\n      disabled={disabled}\n    />\n  );\n};\n\nexport default LyricEdit;\n","import React from 'react';\nimport { Button, Col, Modal, ModalBody, ModalHeader, ModalFooter, Row } from 'reactstrap';\nimport { t } from \"lisan\";\n\nconst HelpModal = props => {\n  const {\n    handleClose,\n    show,\n  } = props;\n  return (\n    <Modal isOpen={show} size=\"lg\">\n      <ModalHeader>{t('title')}</ModalHeader>\n      <ModalBody>\n        <Row>\n          <Col lg=\"10\" className=\"mx-auto text-sm\">\n            <h2 className=\"h6 font-weight-bold\">{t('helpModal.about')}</h2>\n            <ul>\n              <li>{t('helpModal.about1')}</li>\n              <li>{t('helpModal.about2')}</li>\n              <li>{t('helpModal.about3')}</li>\n            </ul>\n            <h2 className=\"h6 font-weight-bold\">{t('helpModal.note')}</h2>\n            <ul>\n              <li>{t('helpModal.note1')}</li>\n              <li>{t('helpModal.note2')}</li>\n            </ul>\n            <h2 className=\"h6 font-weight-bold\">{t('helpModal.misc')}</h2>\n            <ul>\n              <li>\n                {t('helpModal.misc1', {link: <a href=\"https://twitter.com/romotco\" key=\"contact\" target=\"_blank\" rel=\"noopener noreferrer\">@romotco</a>})}\n              </li>\n              <li>\n                {t('helpModal.misc2', {link: <a href=\"https://twitter.com/tnantoka\" key=\"specialThanks\" target=\"_blank\" rel=\"noopener noreferrer\">@tnantoka</a>})}\n                {' '}<a href=\"https://neutrino.tnantoka.com/\" target=\"_blank\" rel=\"noopener noreferrer\">NEUTRINO BLOG</a>\n              </li>\n              <li>\n                {t('helpModal.misc3', {link: <a href=\"https://www.nicovideo.jp/watch/sm36446234\" key=\"mySong\" target=\"_blank\" rel=\"noopener noreferrer\">AI Kiritan - Neu Breath (NEUTRINO Original)</a>})}\n              </li>\n            </ul>\n            <h2 className=\"h6 font-weight-bold\">MusicXML</h2>\n            <ul>\n              <li><a href=\"http://usermanuals.musicxml.com/MusicXML/MusicXML.htm#license.htm%3FTocPath%3D_____7\" rel=\"noopener noreferrer\">MusicXML3.0 Public License</a></li>\n            </ul>\n          </Col>\n        </Row>\n      </ModalBody>\n      <ModalFooter>\n        <Button color=\"primary\" onClick={handleClose}>{t('close')}</Button>\n      </ModalFooter>\n    </Modal>\n  )\n}\n\nexport default HelpModal;\n","export const midiNumberToPitchMusicXML = (midiNumber, transpose = 0) => {\n  const mapStep = [\n    'C','C','D','D','E','F','F','G','G','A','A','B',\n  ];\n  const mapAlter = [\n    0, 1, 0, 1, 0, 0, 1, 0, 1, 0, 1, 0,\n  ];\n  const octave = Math.floor(midiNumber / 12) - 1;\n  const step = mapStep[midiNumber % 12];\n  const alter = mapAlter[midiNumber % 12] + transpose;\n  return {\n    step: {\n      _text: step,\n    },\n    alter: {\n      _text: alter > 0 ? `+${alter.toString()}` : alter.toString()\n    },\n    octave: {\n      _text: octave.toString(),\n    },\n  };\n};\n","import React, { useState, useRef, useEffect } from 'react';\n//import { useHistory, useLocation } from 'react-router-dom';\nimport { Helmet } from 'react-helmet';\nimport {\n  Button,\n  Col,\n  Container,\n  UncontrolledDropdown,\n  DropdownMenu,\n  DropdownToggle,\n  DropdownItem,\n  Input,\n  Nav,\n  NavItem,\n  NavLink,\n  Navbar,\n  Row,\n  TabContent,\n  TabPane,\n  Tooltip,\n  UncontrolledTooltip,\n} from 'reactstrap';\nimport Sequence from 'components/Sequence';\nimport LyricEdit from 'components/LyricEdit';\nimport HelpModal from 'modals/HelpModal';\nimport { Midi } from '@tonejs/midi';\nimport { parseMidiToMusicXML } from 'utils/musicxml';\nimport { parseMidiToUST } from 'utils/ust';\nimport { lisan, t } from \"lisan\";\nimport { toKana, toRomaji } from 'wanakana';\n\nconst MidiEditPage = (props) => {\n  //const history = useHistory();\n  //const location = useLocation();\n  const [loaded, setLoaded] = useState(false);\n  const [locale, setLocale] = useState((window.navigator.language === \"ja\" || window.navigator.language === \"ja-JP\") ? 'ja' : 'en');\n  const fileInputRef = useRef(null);\n  const uploadRef = useRef(null);\n  const [midi, setMidi] = useState(false);\n  const [trackIndex, setTrackIndex] = useState(0);\n  const [tempo, setTempo] = useState(120);\n  const [transpose, setTranspose] = useState(0);\n  const [expandLyric, setExpandLyric] = useState(false);\n  const [yScale, setYScale] = useState(24); // temporary\n  const [xScale, setXScale] = useState(0.25);\n  const [lyric, setLyric] = useState(['']);\n  const [tab, setTab] = useState('lyrics');\n  const [start, setStart] = useState(false);\n  const [openTooltipUpload, setOpenTooltipUpload] = useState(false);\n  const [showHelp, setShowHelp] = useState(false);\n  const updateLocale = (lang) => {\n    lisan.setLocaleName(lang);\n    import(`../../public/dictionaries/${lang}/main`).then((dict) => {\n      lisan.add(dict);\n      setLoaded(true);\n      setLocale(lang);\n      if (lang === 'ja') {\n        setLyric(lyric.map(v => toKana(v)));\n      } else {\n        setLyric(lyric.map(v => toRomaji(v)));\n      }\n    });\n  };\n  useEffect(() => {\n    if (locale) updateLocale(locale);\n  }, [locale]); // eslint-disable-line react-hooks/exhaustive-deps\n  useEffect(() => {\n    if (loaded) {\n      const target = document.querySelector('#sequence-key-72');\n      if (target !== null) {\n        target.scrollIntoView();\n      }\n      if (!start) {\n        setStart(true);\n        setOpenTooltipUpload(true);\n      }\n    }\n  }, [loaded, start]);\n  const handleClickUpload = () => {\n    setOpenTooltipUpload(false);\n    fileInputRef.current.click();\n  };\n  const handleChangeFile = (e) => {\n    const file = e.target.files[0];\n    const reader = new FileReader();\n    reader.readAsArrayBuffer(file);\n    reader.onload = (e) => {\n      const midiData = e.target.result;\n      if (midiData) {\n        if (midiData.tracks < 1) {\n          window.alert(t('message.noTracks'));\n        } else {\n          const midi = new Midi(midiData);\n          const tempo = midi.header.tempos.length ? midi.header.tempos.slice(-1)[0].bpm : 120;\n          setTrackIndex(midi.tracks.findIndex(v => v.notes.length > 0));\n          setTempo(tempo);\n          setLyric(midi.tracks[trackIndex].notes.map(() => locale === 'ja' ? 'ら' : 'ra'));\n          setYScale(24); //temporary\n          setMidi(midi);\n          document.querySelector('#sequence-key-72').scrollIntoView();\n          setExpandLyric(true);\n          document.querySelector('#lyricEditInput').focus();\n        }\n      }\n    };\n    reader.onerror = (e) => {\n      window.alert(t('message.failedToLoadFile'));\n    };\n  };\n  const handleChangeTrack = (e) => {\n    setTrackIndex(e.target.value);\n  };\n  const handleChangeTempo = (e) => {\n    setTempo(e.target.value);\n  };\n  const handleChangeXScale = (e) => {\n    setXScale(e.target.value);\n  };\n  const handleChangeTranspose = (e) => {\n    setTranspose(e.target.value);\n  };\n  const handleGenerateMusicXML = () => {\n    const xml = parseMidiToMusicXML(midi, lyric, locale, trackIndex, tempo, transpose);\n    const blob = new Blob([xml], {\n      type: 'text/plain;charset=utf-8',\n    });\n    const a = document.createElement('a');\n    a.download = 'score.musicxml';\n    a.href = URL.createObjectURL(blob);\n    a.click();\n  };\n  const handleGenerateUST = () => {\n    const text = parseMidiToUST(midi, lyric, locale, trackIndex, tempo, transpose);\n    const blob = new Blob([text], {\n      type: 'text/plain;charset=utf-8',\n    });\n    const a = document.createElement('a');\n    a.download = 'score.ust';\n    a.href = URL.createObjectURL(blob);\n    a.click();\n  };\n\n  if (!loaded) {\n    return ''\n  } else {\n    return (\n      <>\n        <Helmet>\n          <title>{t('title')}</title>\n          <body />\n        </Helmet>\n        <Navbar color=\"light\" light className=\"fixed-top\">\n          <div className=\"d-flex align-items-center mr-auto\">\n            <Button\n              type=\"button\"\n              color={!midi ? 'primary' : 'secondary'}\n              className=\"btn-circle mr-3\"\n              onClick={handleClickUpload}\n              id=\"upload\"\n              ref={uploadRef}\n            >\n              <i className=\"icon ri-folder-open-line\" />\n            </Button>\n            { start &&\n              <Tooltip\n                target=\"upload\"\n                isOpen={openTooltipUpload}\n                delay={4000}\n                fade\n              >\n                {t('startHere')}\n              </Tooltip>\n            }\n            <input\n              ref={fileInputRef}\n              type=\"file\"\n              id=\"midi-file-input\"\n              className=\"d-none\"\n              accept=\"audio/midi, audio/x-midi\"\n              onChange={handleChangeFile}\n            />\n            <span className=\"navbar-text mr-2\">{t(\"track\")}</span>\n            <Input\n              type=\"select\"\n              color=\"light\"\n              size=\"sm\"\n              onChange={handleChangeTrack}\n              style={{width: '120px'}}\n              className=\"mr-3\"\n              disabled={!midi}\n            >\n              {midi && midi.toJSON().tracks.map((v,i) => <option key={i} value={i}>{i+1}: {v.name}</option>)}\n            </Input>\n            <span className=\"navbar-text mr-2\">{t(\"bpm\")}</span>\n            <Input\n              type=\"number\"\n              color=\"light\"\n              size=\"sm\"\n              value={tempo}\n              onChange={handleChangeTempo}\n              style={{width: '70px'}}\n              className=\"mr-3\"\n              disabled={!midi}\n            />\n            <span className=\"navbar-text mr-2\">{t(\"transpose\")}</span>\n            <Input\n              type=\"number\"\n              min=\"-24\"\n              max=\"24\"\n              size=\"sm\"\n              value={transpose}\n              style={{width: '70px'}}\n              onChange={handleChangeTranspose}\n              disabled={!midi}\n            />\n          </div>\n          <UncontrolledDropdown>\n            <DropdownToggle\n              color=\"primary\"\n            >\n              {t(\"download\")}\n              <i className=\"ml-2 icon ri-download-2-line\" />\n            </DropdownToggle>\n            <DropdownMenu>\n              <DropdownItem onClick={handleGenerateMusicXML}>{t('musicXML')}</DropdownItem>\n              <DropdownItem onClick={handleGenerateUST}>{t('ust')}</DropdownItem>\n            </DropdownMenu>\n          </UncontrolledDropdown>\n          <UncontrolledDropdown>\n            <DropdownToggle color=\"light\" className=\"btn btn-circle\">\n              <i className=\"icon ri-more-2-fill\" />\n            </DropdownToggle>\n            <DropdownMenu>\n              <DropdownItem onClick={() => updateLocale('en')}>{t('english')}</DropdownItem>\n              <DropdownItem onClick={() => updateLocale('ja')}>{t('japanese')}</DropdownItem>\n              <DropdownItem divider />\n              <DropdownItem onClick={() => setShowHelp(true)}>{t('about')}</DropdownItem>\n            </DropdownMenu>\n          </UncontrolledDropdown>\n        </Navbar>\n        <Container fluid className=\"px-0\" style={{marginTop: '53px'}}>\n          <Row className=\"no-gutters\" onClick={() => setExpandLyric(false)}>\n            <Col>\n              <Sequence\n                midi={midi}\n                trackIndex={trackIndex}\n                transpose={transpose}\n                lyric={lyric}\n                setLyric={setLyric}\n                xScale={xScale}\n                yScale={yScale}\n                locale={locale}\n              />\n            </Col>\n          </Row>\n          <Row>\n            <div className=\"sequence-controls\">\n              <div className=\"d-flex align-items-start\">\n                <div className=\"w-100 p-2\">\n                  <Nav pills className=\"mb-2\">\n                    <NavItem>\n                      <NavLink\n                        href=\"#\"\n                        onClick={() => { setTab('lyrics') }}\n                        active={tab === 'lyrics'}\n                      >\n                        {t('lyrics')}\n                      </NavLink>\n                    </NavItem>\n                    <NavItem>\n                      <NavLink\n                        href=\"#\"\n                        onClick={() => { setTab('velocity') }}\n                        active={tab === 'velocity'}\n                        disabled\n                      >\n                        {t('velocity')}\n                      </NavLink>\n                    </NavItem>\n                    <NavItem>\n                      <NavLink\n                        href=\"#\"\n                        onClick={() => { setTab('pitch') }}\n                        active={tab === 'pitch'}\n                        disabled\n                      >\n                        {t('pitch')}\n                      </NavLink>\n                    </NavItem>\n                  </Nav>\n                  <TabContent activeTab={tab}>\n                    <TabPane tabId=\"lyrics\">\n                      <LyricEdit\n                        lyric={lyric}\n                        setLyric={setLyric}\n                        expand={expandLyric}\n                        setExpand={setExpandLyric}\n                        limit={midi ? midi.tracks[trackIndex].notes.length : 0}\n                        locale={locale}\n                        disabled={!midi}\n                      />\n                      { start &&\n                        <UncontrolledTooltip\n                          target=\"lyricEditInput\"\n                          fade\n                        >\n                          {t('inputLyrics')}\n                        </UncontrolledTooltip>\n                      }\n                    </TabPane>\n                  </TabContent>\n                </div>\n                <div className=\"px-3\">\n                  <Input\n                    type=\"range\"\n                    className=\"sequence-scale-range\"\n                    max=\"0.5\"\n                    min=\"0.025\"\n                    step=\"0.025\"\n                    value={xScale}\n                    onChange={handleChangeXScale}\n                  />\n                </div>\n              </div>\n            </div>\n          </Row>\n        </Container>\n        <HelpModal\n          show={showHelp}\n          handleClose={() => {\n            setShowHelp(false);\n          }}\n        />\n      </>\n    )\n  }\n}\n\nexport default MidiEditPage;\n","import xmljs from 'xml-js';\nimport { toKana } from 'wanakana';\nimport { midiNumberToPitchMusicXML } from 'utils/convert';\n\nexport const parseMidiToMusicXML = (midi, lyric, locale, trackIndex, tempo, transpose) => {\n  const raw = midi.toJSON();\n  const header = raw.header;\n  const beats = Array.isArray(header.timeSignatures) && header.timeSignatures.length > 0 ? header.timeSignatures[0].timeSignature : [4,4];\n  const track = raw.tracks[trackIndex];\n  const totalTicks = track.notes.slice(-1)[0].durationTicks + track.notes.slice(-1)[0].ticks;\n  const measureTicks = header.ppq * beats[1] * (beats[0] / beats[1]);\n  const measuresCount = Math.ceil(totalTicks / measureTicks);\n  let measures = [...Array(measuresCount).keys()].map((_,measureIndex) => {\n    const min = measureIndex * measureTicks;\n    const max = min + measureTicks;\n    const measureNotes = track.notes.map((note, index) => {\n      if (max > note.ticks && (min <= note.ticks || min < (note.ticks + note.durationTicks))) {\n        return {\n          ...note,\n          lyric: locale === 'ja' ? lyric[index] : toKana(lyric[index]) || '',\n        };\n      } else {\n        return null;\n      }\n    }).filter(v => v !== null);\n    let notes = [];\n    // full rest\n    if (measureNotes.length === 0) {\n      notes.push({\n        rest: {},\n        duration: {\n          _text: measureTicks\n        },\n      });\n    } else {\n      measureNotes.forEach((current, index, origin) => {\n        const before = origin[index - 1] || false;\n        const next = origin[index + 1] || false;\n        const currentLast = current.ticks + current.durationTicks;\n        const beforeLast = before ? before.ticks + before.durationTicks : false;\n\n        // First note = rest\n        if (!before && current.ticks > min) {\n          notes.push({\n            rest: {},\n            duration: {\n              _text: current.ticks - min,\n            }\n          });\n        // First note = tied stop\n        } else if (!before && current.ticks < min) {\n          notes.push({\n            _attributes: {\n              dynamics: current.velocity * 100,\n            },\n            pitch: midiNumberToPitchMusicXML(current.midi, transpose),\n            duration: {\n              _text: currentLast - min,\n            },\n            tie: {\n              _attributes: {\n                type: 'stop',\n              },\n            }\n          });\n        // Rest note between before to current\n        } else if (before && beforeLast < current.ticks) {\n          notes.push({\n            rest: {},\n            duration: {\n              _text: current.ticks - beforeLast,\n            }\n          });\n        }\n        // Last note = tied start\n        if (currentLast > max) {\n          notes.push({\n            _attributes: {\n              dynamics: current.velocity * 100,\n            },\n            pitch: midiNumberToPitchMusicXML(current.midi, transpose),\n            duration: {\n              _text: max - current.ticks,\n            },\n            lyric: {\n              text: {_text: current.lyric,}\n            },\n            tie: {\n              _attributes: {\n                type: 'start',\n              },\n            }\n          });\n        } else if (current.ticks >= min) {\n          // current note\n          //const currentDurationTicks = next && next.ticks >= currentLast ? current.durationTicks - (next.ticks - currentLast) : current.durationTicks;\n          notes.push({\n            _attributes: {\n              dynamics: current.velocity * 100,\n            },\n            pitch: midiNumberToPitchMusicXML(current.midi, transpose),\n            duration: {\n              _text: current.durationTicks,\n            },\n            lyric: {\n              text: {_text: current.lyric,}\n            },\n          });\n        };\n        // last note = rest\n        if (!next && max > (currentLast)) {\n          notes.push({\n            rest: {},\n            duration: {\n              _text: max - currentLast,\n            }\n          });\n        };\n      });\n    }\n    return {\n      _attributes: {\n        number: measureIndex + 2,\n      },\n      note: notes,\n    };\n  });\n\n  measures.unshift({\n    _attributes: {\n      number: '1',\n    },\n    attributes: {\n      divisions: {_text: header.ppq},\n      key: {\n        fifths: {_text: '0'},\n      },\n      time: {\n        beats: {\n          _text: beats[0],\n        },\n        'beat-type': {\n          _text: beats[1],\n        },\n      },\n      clef: {\n        sign: {_text: 'G'},\n        line: {_text: '2'},\n      },\n    },\n    direction: {\n      _attributes: {\n        placement: 'above',\n      },\n      sound: {\n        _attributes: {\n          tempo: tempo,\n        }\n      },\n    },\n    note: {\n      rest: {},\n      duration: {\n        _text: measureTicks,\n      }\n    },\n  });\n  const json = {\n    _declaration: {\n      _attributes: {\n        version: '1.0',\n        encoding:'utf-8'\n      }\n    },\n    _doctype: 'score-partwise PUBLIC \"-//Recordare//DTD MusicXML 3.1 Partwise//EN\" \"http://www.musicxml.org/dtds/partwise.dtd\"',\n    'score-partwise': {\n      _attributes: {\n        version: '3.1',\n      },\n      'part-list': {\n        'score-part': {\n          _attributes: {\n            id: `p${trackIndex}`,\n          },\n          'part-name': {\n            _text: header.name || '',\n          },\n        },\n      },\n      part: {\n        _attributes: {\n          id: `p${trackIndex}`,\n        },\n        measure: measures,\n      },\n    },\n  };\n\n  const xml = xmljs.json2xml(json, {compact: true, spaces: 2});\n  return xml;\n};\n","import { toKana } from 'wanakana';\n\nexport const parseMidiToUST = (midi, lyric, locale, trackIndex, tempo, transpose, ustOptions = {\n  projectName: '(no title)',\n  flags: '',\n  outFile: '',\n  voiceDir: '${DEFAULT}/',\n  mode2: true,\n}) => {\n  const raw = midi.toJSON();\n  const header = raw.header;\n  const beats = Array.isArray(header.timeSignatures) && header.timeSignatures.length > 0 ? header.timeSignatures[0].timeSignature : [4,4];\n  const track = raw.tracks[trackIndex];\n  return `\n    [#VERSION]\n    UST Version2.0\n    Charset=UTF-8\n    [#SETTING]\n    TimeSignatures=(${beats[0]}/${beats[1]}/0),\n    Tempo=${tempo}\n    ProjectName=${ustOptions.projectName}\n    OutFile=${ustOptions.outFile}\n    VoiceDir=${ustOptions.voiceDir}\n    Flags=${ustOptions.flags}\n    Mode2=${ustOptions.mode2 ? 'True' : 'False'}\n    ${track.notes.map((note, index, origin) => {\n      return `\n        [#${('0000' + index).slice(-4)}]\n        Delta=${index === 0 ? note.ticks : note.ticks - origin[index - 1].ticks}\n        Duration=${note.durationTicks}\n        Length=${origin[index + 1] ? origin[index + 1].ticks - note.ticks : note.durationTicks}\n        Lyric=${lyric[index] ? (locale === 'ja' ? lyric[index] : toKana(lyric[index])) : ''}\n        NoteNum=${note.midi + Number(transpose)}\n        Velocity=${Math.floor(note.velocity) * 10000 / 100}\n        StartPoint=0.00\n        Intensity=100\n        Modulation=0\n        PBS=-40.0,0.0\n        PBW=80.0\n        Envelope=5.0,1.0,0.0,100.0,\n        100.0,100.0,100.0,7.0,80.0,1.0,100.0,0.0,1.0,100.0,1.0,100.0\n        VBR=0,0,0,0,0,0,0,0,0,0`;\n    }).join('')}\n  [#TRACKEND]`.replace(/^\\s+/gm, '');\n}\n","import React from 'react';\nimport {\n  BrowserRouter,\n  Switch,\n  Route,\n} from \"react-router-dom\";\n\n//import MidiUploadPage from 'pages/MidiUploadPage';\nimport MidiEditPage from 'pages/MidiEditPage';\n\nconst Routes = () => {\n  return (\n    <BrowserRouter basename={process.env.PUBLIC_URL}>\n      <Switch>\n        {/* <Route exact path=\"/\" component={MidiUploadPage} /> */}\n        <Route exact path=\"/\" component={MidiEditPage} />\n        <Route component={() => (<div>404 Not found</div>)} />\n      </Switch>\n    </BrowserRouter>\n  );\n}\n\nfunction App() {\n  return (\n    <div className=\"app\">\n      <main className=\"main\">\n        <Routes />\n      </main>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'scss/index.scss';\nimport 'remixicon/fonts/remixicon.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}